<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" th:href="@{ /css/reviewPage/review.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <th:block th:include="components/Header.html"></th:block>

<h2>후기</h2>
<!-- 후기 보드 테이블 -->
<div class="table">

    <table class="reviewBox" id="boardListTable">
        <th:p style="text-align: right" sec:authorize="isAuthenticated()"><button type="button" class="buttons-board" style="width: 150px" onclick="location.href='/booking/reviewPosting'">후기등록</button></th:p>
        <br>
        <tr class="table-th">
            <th style="width: 100px; border-top-left-radius: 10px; border-bottom-left-radius: 10px;">No</th>
            <th style="width: 200px">유형</th>
            <th style="width: 700px">제목</th>
            <th style="width: 200px">작성자</th>
            <th style="width: 200px">작성일</th>
            <th style="width: 100px; border-top-right-radius: 10px; border-bottom-right-radius: 10px;">조회수</th>
        </tr>

        <tr th:each="board : ${ boardList }" class="table-td1">
            <td style="border-top-left-radius: 10px; border-bottom-left-radius: 10px;"
                th:text="${ board.boardCode }"></td>
            <td th:text="${ board.boardCategory }"></td>
            <td th:text="${ board.title }"></td>
            <td th:text="${ board.userId.nickname }"></td>
            <td th:text="${ board.postedDate }"></td>
            <td style="border-top-right-radius: 10px; border-bottom-right-radius: 10px;"
                th:text="${ board.viewCount }"></td>
        </tr>
    </table>
</div>

<!-- 페이징 처리 -->
<div class="paging">
    <div style="display: flex;">
        <!-- 맨 앞으로 이동 -->
        <!-- th:disabled = 1 페이지일 경우 버튼 안보이게 -->
        <button th:onclick="'location.href=\'/board/searchList?currentPage='+ @{${ selectCriteria.startPage }} + '\''"
                th:disabled="${ selectCriteria.pageNo == 1 }"><img src="../images/board/previousfirst.png"></button>

        <!-- 이전 페이지로 이동 -->
        <button th:onclick="'location.href=\'/board/searchList?currentPage='+ @{${ selectCriteria.pageNo - 1 }} + '\''"
                th:disabled="${ selectCriteria.pageNo == 1 }"><img src="../images/board/previous.png"></button>

        <!-- 숫자 버튼 -->
        <th:block th:each="page : ${ #numbers.sequence(selectCriteria.startPage, selectCriteria.endPage) }">
            <button style="color: #C09A81;"
                    th:text="${ page }"
                    th:onclick="'location.href=\'/board/searchList?currentPage='+ @{${ page }} + '\''"
                    th:disabled="${ selectCriteria.pageNo eq page }">
            </button>
        </th:block>

        <!-- 다음 페이지로 이동 -->
        <button th:onclick="'location.href=\'/board/searchList?currentPage='+ @{${ selectCriteria.pageNo + 1 }} + '\''"
                th:disabled="${ selectCriteria.pageNo == selectCriteria.lastPage }"><img src="../images/board/next.png"></button>

        <!-- 마지막 페이지로 이동 -->
        <button th:onclick="'location.href=\'/board/searchList?currentPage='+ @{${ selectCriteria.lastPage }} + '\''"
                th:disabled="${ selectCriteria.pageNo == selectCriteria.lastPage }"><img src="../images/board/nextlist.png"></button>
    </div>
</div>

<script th:inline="javascript">

    /* CRUD 메시지 알림 창 */
    const message = '[[${ message }]]';
    if (message != null && message !== 'null'){
        alert(message);
    }

</script>
</html>