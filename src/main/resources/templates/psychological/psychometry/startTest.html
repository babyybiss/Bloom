<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>start</title>
    <link rel="stylesheet" type="text/css" href="/css/psychological/startTest.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
          rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>
<body>
<header class="header" th:include="components/Header.html" th:with="textColor='#FEEFCC'"></header>
<main>
    <button id="countBoutton" class="countbutton"><h2 id='result' style="display: flex; justify-content: center;"> 1 /
        4</h2></button>
</main>
<div>
    <article>
        <form action="" method="get" class="theme-checker">
            <div th:each="test, testIndex : ${testQ}">
                <!-- 서비스 or 쿼리문으로 질문 식별 -->

                <h2 class="whiteText" th:text="${test.testContent}"></h2>
                <div class="qBox">
                    <h2></h2>

                <input type="radio" name="response_${testIndex}" class="one" value="1"/>
                <input type="radio" name="response_${testIndex}" class="two" value="2"/>
                <input type="radio" name="response_${testIndex}" class="three" value="3"/>
                <input type="radio" name="response_${testIndex}" class="four" value="4"/>
                <input type="radio" name="response_${testIndex}" class="five" value="5"/>
                </div>
                <div class="testQ">
                    <div>전혀그렇지않다</div><div>매우그렇다</div>
                </div>

            </div>
            <div>
                <input id="next" class="roundbutton" type="button" value="다음" onclick="begin()">
            </div>
        </form>
    </article>
    <br><br><br><br><br><br><br><br><br><br><br><br>
</div>
<footer style=" position: fixed;bottom: 0; margin: 0 auto; left: 0; right: 0;">
    <img class="grass" src="/images/common/beigeGrass.png" alt="grass">
    <th:block th:include="components/Footer.html" th:with="textColor='#C09A81'"></th:block>
</footer>
<script>
    $("#next").click(function (){
        $.ajax({
            url: "start",
            success : function (data, status,xhr){
                console.table(data);

                const $qBox = $("#qBox h2");
                $qBox.html("");
                <input type="radio" name="response_${testIndex}" className="one" value="1"/>
                for (let index in data){
                    $h2 = $("<h2>").text(data[index].testContent);
                    $div = $("<div>");
                    $btr1 = $("<input>").name(data[index].testCategory).value(1);
                    $btr2 = $("<input>").name(data[index].testCategory).value(2);
                    $btr3 = $("<input>").name(data[index].testCategory).value(3);
                    $btr4 = $("<input>").name(data[index].testCategory).value(4);
                    $btr5 = $("<input>").name(data[index].testCategory).value(5);

                    $div.append($h2);
                    $div.append($btr1);
                    $div.append($btr2);
                    $div.append($btr3);
                    $div.append($btr4);
                    $div.append($btr5);

                    $qBox.append($div);
                }
            },
            error : function (xht, status,error){
                console.log(error);
            }
        });
    });
</script>
</body>
</html>