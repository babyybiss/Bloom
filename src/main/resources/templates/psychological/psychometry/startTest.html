<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>start</title>
    <link rel="stylesheet" type="text/css" href="/css/psychological/startTest.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
          rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>
<body>
<header class="header" th:include="components/Header.html" th:with="textColor='#FEEFCC'"></header>

<main>
    <button id="countBoutton" class="countbutton"><h2 id='result' style="display: flex; justify-content: center;"> 1 /
        4</h2></button>
</main>
<div>
    <article>
        <div>
        </div>
        <form action="/psychological/psychometry/last" method="get" class="theme-checker">
            <div th:each="test, testIndex : ${testQ}">
                <!-- 서비스 or 쿼리문으로 질문 식별 -->
                <h2 class="whiteText" th:text="${ test.testContent }" >요즘 기분이 가라앉거나 우울해서 기운이 없다.</h2>
                <input type="radio" th:name="${test.testCategory} + ${testIndex}" class="one" value="1" />
                <input type="radio" th:name="${test.testCategory} + ${testIndex}" class="two" value="2" />
                <input type="radio" th:name="${test.testCategory} + ${testIndex}" class="three" value="3" />
                <input type="radio" th:name="${test.testCategory} + ${testIndex}" class="four" value="4" />
                <input type="radio" th:name="${test.testCategory} + ${testIndex}" class="five" value="5" />
                <div class="testQ">
                    <div>전혀그렇지않다</div> <div>매우그렇다</div>
                </div>
            </div>
            <div>
                <input id="next" class="roundbutton" type="button" value="다음" onclick="testCount()">
            </div>
        </form>
    </article><br><br><br><br><br><br><br><br><br><br><br><br>
</div>
<footer style=" position: fixed;bottom: 0; margin: 0 auto; left: 0; right: 0;">
    <img class="grass" src="/images/common/beigeGrass.png" alt="grass">
    <th:block th:include="components/Footer.html" th:with="textColor='#C09A81'"></th:block>
</footer>
<script>
    $("#next").click(function() {
        countAndScroll();
        function countAndScroll() {
            // 결과를 표시할 element
            const resultElement = document.getElementById('result');
            // 현재 화면에 표시된 값
            let number = parseInt(resultElement.innerText);
            number += 1;
            if (number > 4) {
                window.location.href = '/psychological/psychometry/last';
                return; // 리디렉션 후 함수 종료
            }
            resultElement.innerText = number + " / 4";
            // 화면을 최상단으로 스크롤
            window.scrollTo(0, 0);
        }
    });
</script>
</body>
</html>